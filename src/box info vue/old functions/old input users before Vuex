<template>
  <div class="userInputs" dir="rtl">
    <h4>הכנסת פרטים אישיים</h4>
    <q-input outlined v-model="employee.firstName" type="text" label="שם פרטי"/>
    <q-input outlined v-model="employee.lastName" type="text" label="שם משפחה"/>
    <q-input outlined v-model="employee.jobTitle" type="text" label="סוג עבודה"/>
    <q-input outlined v-model="employee.basicWage" type="number" label="שכר שעתי" value="0"/>

    <q-btn v-if="!item" class="glossy" rounded color="green" label="צור עובד" @click="addEmployee()"/>
    <q-btn v-if="item" class="glossy" rounded color="green" label="עדכון נתונים" @click="update()"/>
    <q-btn v-show="!item" class="glossy" rounded color="green" label="חפש עובד" @click="searchEmployee()"/>
  </div>
</template>

<script>

import firebaseDatabase from '../middleware/firebase/database'
// import api from '../middleware/API/index'

export default {
  name: "inputsUsers",
  props: ['tableName', 'item','user'],
  data() {
    return {

      employee: {
        firstName: '',
        lastName: '',
        jobTitle: '',
        basicWage: 0,
      }
    }
  },
  methods: {

    addEmployee() {
      firebaseDatabase.create({entity: this.tableName, employees: this.employee})
          .then(() => {
          })
    },

    update() {
      firebaseDatabase.updateItem({entity: this.tableName, id: this.$route.params.id, employee: this.employee})
          .then(() => {
            this.$router.push(`/backOffice`);
          })
    },

    // searchEmployee() {
    //   let array = localStorageDriver.selectFromDB(this.tableName);
    //   this.$emit('search', array, this.employee);
    // }
  },

  async created() {
    if (this.$route.params.id) {
      const result = await firebaseDatabase.selectById({entity: this.tableName, id: this.$route.params.id})
      this.employee = result
    }
  }
}
</script>

<style scoped>
.userInputs {
  background-color: #fffcfc;
  /*margin-left: 65%;*/
  width: 500px;
  padding: 1em;
  border: 3px solid #000000;
  border-radius: 1em;
  font-size: 30px;
}
</style>